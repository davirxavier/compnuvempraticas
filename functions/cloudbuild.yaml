steps:
  - name: 'gcr.io/cloud-builders/gcloud'
    args: ['functions', 'deploy', 'update-covid-data-middleware-fn', '--trigger-topic=update-covid-data-middleware', '--region=us-west1', '--runtime', 'nodejs16', '--entry-point', 'helloPubSub', '--source=.']

#  - name: 'gcr.io/cloud-builders/gcloud'
#    args: [ 'functions', 'deploy', 'update-covid-data-br', '--trigger-topic=update-covid-data', '--region=us-west1', '--runtime', 'nodejs16', '--entry-point', 'helloPubSub' ]
#
#  - name: 'gcr.io/cloud-builders/gcloud'
#    args: [ 'functions', 'deploy', 'update-covid-data-us', '--trigger-topic=update-covid-data', '--region=us-west1', '--runtime', 'nodejs16', '--entry-point', 'helloPubSub' ]
#
#  - name: 'gcr.io/cloud-builders/gcloud'
#    args: [ 'functions', 'deploy', 'update-covid-data-sk', '--trigger-topic=update-covid-data', '--region=us-west1', '--runtime', 'nodejs16', '--entry-point', 'helloPubSub' ]
options:
  logging: CLOUD_LOGGING_ONLY
